---
layout: default
title: Search machines
---

<div class="search-container">
  <!-- He añadido un placeholder para que se sepa que es un buscador -->
  <input type="text" id="search" autofocus 
         style="width: 100%; padding: 10px; margin-bottom: 20px; border-radius: 5px; border: 1px solid #ccc; color: black;">
  
  <div id="results">
    {% for post in site.posts %}
      <!-- IMPORTANTE: He añadido los atributos data- aquí abajo -->
      <div class="post-card" 
           data-title="{{ post.title | downcase }}" 
           data-tags="{{ post.tags | join: ' ' | downcase }}" 
           data-content="{{ post.content | strip_html | truncatewords: 50 | downcase }}"
           style="display:flex; align-items:flex-start; gap:16px; margin-bottom: 20px;">
        
        {% if post.image %}
          <img src="{{ post.image }}" alt="{{ post.title }}" width="48" height="48" style="border-radius:50%; object-fit:cover;">
        {% endif %}
        
        <div style="display:flex; flex-direction:column;">
          <a href="{{ post.url }}">
            <h3 style="margin:0;">{{ post.title }}</h3>
          </a>
          <p class="post-meta" style="margin:4px 0;">
            {{ post.date | date: "%d %b %Y" }} · {{ post.tags | join: ", " }}
          </p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
  const searchInput = document.getElementById('search');
  const posts = document.querySelectorAll('#results .post-card');

  searchInput.addEventListener('input', () => {
    const query = searchInput.value.toLowerCase();

    posts.forEach(post => {
      // Obtenemos los datos de los atributos data- que pusimos en el HTML
      const title = post.getAttribute('data-title') || "";
      const tags = post.getAttribute('data-tags') || "";
      const content = post.getAttribute('data-content') || "";

      // Si la búsqueda coincide con el título, tags o contenido
      if (title.includes(query) || tags.includes(query) || content.includes(query)) {
        post.style.display = 'flex'; // Usamos flex para que no se rompa el diseño original
      } else {
        post.style.display = 'none';
      }
    });
  });
</script>
